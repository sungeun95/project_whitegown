<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WHITEGOWN</title>
    <link rel="shortcut icon" href="./images/icon/favicon.ico" type="image/x-icon">
    <link rel="icon" href="./images/icon/favicon.ico" type="image/x-icon">
    <!--플러그인 필수 css cdn 연결-->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.css">
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css">
    <!--플러그인 필수 JS cdn 연결-->
    <script src="https://unpkg.com/swiper/swiper-bundle.js"></script>
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <!-- 스크롤 트리거 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/ScrollTrigger.min.js"></script>
    <link rel="stylesheet" href="./style/reset.css">
    <style>
/* ======================================================== header : s*/
header{
    width: 100%; height: 60px; background: none;
    position: fixed; top: 0; left: 0; z-index: 100;
    padding: 10px; display: flex; justify-content: space-between; align-items: center;
} 
header h1{}
header>h1>a{
    display: block; width: 140px; height: 40px;
    background: url(../images/logo.png) center/cover;
}


header .m_menu{display: none;}
header .h_nav nav{display: flex;}
header .h_nav nav>a{ 
    display: block;
    color: #fff; padding: 15px 50px;
    background:none;
}
/* ======================================================== header : e */
/* ======================================================== gate : s */
main .gate{width: 100%; height: 100vh;}
#gate_slide{height: 100%; position: relative; overflow: hidden;}
#gate_slide .swiper-slide{width: 100%; height: 100%;}
#gate_slide .swiper-slide>.img{
    width: 100%; height: 100%;
    position: absolute; left: 0; top: 0;
}
#gate_slide .slide1 .img{background: url(../images/bg_01.jpg) center/cover;}
#gate_slide .slide2 .img{background: url(../images/bg_02.jpg) center/cover;}
#gate_slide .slide3 .img{background: url(../images/bg_03.jpg) center/cover;}
#gate_slide .swiper-slide .text{
    width: 100%; height: 100%; background: none;
    position: absolute; left: 0; top: 0; z-index: 10;
    display: flex; flex-flow: column nowrap;
    justify-content: center;
    padding: 0 150px;
}
#gate_slide .swiper-slide .text>p{font-size: 1.875rem;margin-left: 10px;}
#gate_slide .swiper-slide .text>*{color: #fff;}
#gate_slide .swiper-slide .text h2{
    font-size: 3.75rem; margin: 5px 0 20px;
    font-weight: 600;
}
#gate_slide .swiper-slide .text .tmi{}
#gate_slide .swiper-slide .text .tmi span{
    display: block; margin-bottom: 10px;margin-left: 10px;
    font-weight: 200;color: #fff;
}
/* ======================================================== gate : e */
        .value{ width: 100%; height: 100vh; background-color: orange;}
        #wrap_slide{}
        #wrap_slide .swiper-slide{width: 100%; height: 100vh;}
        #wrap_slide .city{background-color: yellow;}
/* ======================================================== */
#wrap_slide .city{}
#wrap_slide .city .video_box{width: 100%; height: 100%; position: relative;}
#wrap_slide .city .video_box .video_video{
    width: 100%; height: 100%;
    top: 50%; left: 50%; overflow: hidden;
}
#wrap_slide .city .video_box video{width: 100%; height: 100%; object-fit: cover;}
#wrap_slide .city .video_box .city_text{
    background: linear-gradient(0deg,rgba(0, 0, 0, 0) 0%, rgba(0, 0, 0, 0.7) 100%);
    width: 100%; height: 100%; position: absolute; top: 0; left: 0; z-index: 5;
}
/* ======================================================== */
        #wrap_slide .printed{background-color: green;}
        #wrap_slide .embroidery{background-color: blue;}
        #wrap_slide .list{ width: 100%; height: 100vh; background-color: navy;}
    </style>
</head>
<body>
    <header>
        <h1><a href="#"></a></a></h1>
        <div class="h_nav">
            <div class="m_menu"><p></p><p></p><p></p></div>
            <nav>
                <a href="#">회사 소개</a>
                <a href="#">제품안내</a>
                <a href="#">납품안내</a>
                <a href="#">상담 및 자료실</a>
            </nav>
        </div>
    </header>
    <main>
        <div class="gate">
            <div id="gate_slide">
                <div class="swiper-wrapper">
                    <div class="swiper-slide slide1">
                        <p class="img"></p>
                        <div class="text">
                            <p>흰색은 숨기지 않는다</p>
                            <h2>신뢰로 시작된 약속이다 </h2>
                            <div class="tmi">
                                <span>깨끗한 옷 위에 하루가 쌓이고,</span>
                                <span>그 하루 위에 믿음이 남는다</span>
                                <span>신뢰는 그렇게 입는다.</span>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide slide2">
                        <p class="img"></p>
                        <div class="text">
                            <p>흰색은 숨기지 않는다</p>
                            <h2>신뢰로 시작된 약속이다 </h2>
                            <div class="tmi">
                                <span>깨끗한 옷 위에 하루가 쌓이고,</span>
                                <span>그 하루 위에 믿음이 남는다</span>
                                <span>신뢰는 그렇게 입는다.</span>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide slide3">
                        <p class="img"></p>
                        <div class="text">
                            <p>흰색은 숨기지 않는다</p>
                            <h2>신뢰로 시작된 약속이다 </h2>
                            <div class="tmi">
                                <span>깨끗한 옷 위에 하루가 쌓이고,</span>
                                <span>그 하루 위에 믿음이 남는다</span>
                                <span>신뢰는 그렇게 입는다.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="value"></div>
        <div class="swiper" id="wrap_slide">
            <!--필수-->
            <div class="swiper-wrapper">
                <div class="swiper-slide city">
                    <div class="video_box">
                        <div class="video_video">
                            <video src="./images/video/city.mp4" autoplay muted loop ></video>
                        </div>
                        <div class="city_text">
                            <div class="text_top">
                                <p><span>64</span>개의 업체가 화이트가운과 거래를 진행하고 있으며</p>
                                <p><span>99</span>%의 소비자가 만족하였습니다. </p>
                            </div>
                            <div class="text_bottom">
                                <div class="text_left">
                                    <p>정직한 속도, 신뢰의 품질</p>
                                    <p>신뢰를 약속처럼 지키며, 고객과의 모든 거래에 신속함과 정직함을 더해 갑니다. <br>
                                        단순한 구매가 아닌, 함께 성장하는 파트너십을 경험해보세요.</p>
                                </div>
                                <div class="text_right">
                                    <p>*소비자 만족도를 통계하여 합산한 계산입니다.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide printed">slide2</div>
                <div class="swiper-slide embroidery">slide3</div>
                <div class="swiper-slide list">slide4</div>
            </div>
        </div>
    </main>
    <footer></footer>
    <!-- ======================================== -->
    <script>   
        /* 스크롤 트리거 */
        document.addEventListener("DOMContentLoaded", (event) => {
        gsap.registerPlugin(ScrollTrigger)
        ScrollTrigger.create({
        trigger: "#wrap_slide", // swiper 영역
        start: "top center",    // swiper가 뷰포트 중간에 닿을 때
        end: "bottom center",
        onEnter: () => {
            document.querySelector('#wrap_slide').scrollIntoView({
            behavior: 'smooth'
            });
        },
        onEnterBack: () => {
            document.querySelector('#wrap_slide').scrollIntoView({
            behavior: 'smooth'
            });
        }
        });
        // 스크롤 트리거 작성 종료
        });
        
        let isAnimating = false;  // 애니메이션 진행 중 플래그
        
        const swiper = new Swiper('#wrap_slide', {
            effect: 'fade',
            fadeEffect: { crossFade: true },
            speed: 1000,
            mousewheel: true,
            on: {
            reachEnd: () => {
                // 마지막 슬라이드에 도달하면 스와이퍼 휠 끄기
                swiper.mousewheel.disable();
                  // ✅ 5초 후에 scrollIntoView 실행
                setTimeout(() => {
                    swiper.mousewheel.enable(); // 휠 재활성화
                    document.querySelector('.list').scrollIntoView({ behavior: 'smooth' });
                }, 2000); // 원하는 지연 시간 조정 가능 (예: 2000ms)
            },
            reachBeginning: () => {
                // 다시 처음 슬라이드로 오면 필요시 enable
                swiper.mousewheel.disable();
                setTimeout(() => {
                    swiper.mousewheel.enable();
                    document.querySelector('.value').scrollIntoView({ behavior: 'smooth' });
                }, 1000);
            }
            }
        });
        let goingForward = true;  // 진행 방향 상태

        document.querySelector('#wrap_slide').addEventListener('click', () => {
        const lastIndex = swiper.slides.length - 1;
        const currentIndex = swiper.activeIndex;

        if (goingForward) {
            if (currentIndex < lastIndex) {
            swiper.slideNext();
            } else {
            goingForward = false;  // 마지막 슬라이드라면 역방향으로 변경
            swiper.slidePrev();
            }
        } else {
            if (currentIndex > 0) {
            swiper.slidePrev();
            } else {
            goingForward = true;  // 첫 슬라이드라면 다시 정방향으로 변경
            swiper.slideNext();
            }
        }
        });
        // 추가: 위로 스크롤해서 다시 Swiper로 들어오면 활성화
        window.addEventListener('scroll', () => {
            const swiperEl = document.querySelector('#wrap_slide');
            const rect = swiperEl.getBoundingClientRect();

            if (rect.top < window.innerHeight && rect.bottom > 0) {
            // 화면 안에 다시 Swiper가 들어오면 활성화
            swiper.mousewheel.enable();
            }
        });
        
        if (swiper.isEnd) {
            document.querySelector('.list').scrollIntoView({ behavior: 'smooth' });
        }

        /* 1행 스와이퍼 적용 */
        const bestSwiper = new Swiper('#gate_slide',{
            //옵션:값,
        })
    </script>
</body>
</html>